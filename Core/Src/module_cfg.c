/*
 * module_cfg.c
 *
 *  Created on: Jan 6, 2024
 *      Author: lucas
 */


#include "module_cfg.h"

module_cfg configs = {0};
module_cfg read_cfg = {0};

uint16_t bufferTensaoVA[64] = { 1,          1.09801714, 1.19509032, 1.29028468, 1.38268343, 1.47139674,
							  1.55557023, 1.63439328, 1.70710678, 1.77301045, 1.83146961, 1.88192126,
							  1.92387953, 1.95694034, 1.98078528, 1.99518473, 2         , 1.99518473,
							  1.98078528, 1.95694034, 1.92387953, 1.88192126, 1.83146961, 1.77301045,
							  1.70710678, 1.63439328, 1.55557023, 1.47139674, 1.38268343, 1.29028468,
							  1.19509032, 1.09801714, 1         , 0.90198286, 0.80490968, 0.70971532,
							  0.61731657, 0.52860326, 0.44442977, 0.36560672, 0.29289322, 0.22698955,
							  0.16853039, 0.11807874, 0.07612047, 0.04305966, 0.01921472, 0.00481527,
							  0         , 0.00481527, 0.01921472, 0.04305966, 0.07612047, 0.11807874,
							  0.16853039, 0.22698955, 0.29289322, 0.36560672, 0.44442977, 0.52860326,
							  0.61731657, 0.70971532, 0.80490968, 0.90198286};

uint16_t bufferTensaoVB[64] = {1.86602540, 1.81284668, 1.75183981, 1.68359230,
						          1.60876143, 1.52806785, 1.44228869, 1.35225005,
						          1.25881905, 1.16289547, 1.06540313, 0.967280917,
						          0.869473808, 0.772923737, 0.678560535, 0.58729297,
						          0.5, 0.417522303, 0.340654185, 0.270135927,
						          0.20664666, 0.150797818, 0.103127258, 0.0640940732,
						          0.0340741737, 0.0133566679, 0.00214107676, 0.000535412524,
						          0.00855513863, 0.0261230207, 0.0530698705, 0.0891361751,
						          0.133974596, 0.187153315, 0.248160193, 0.316407698,
						          0.391238571, 0.471932149, 0.55771131, 0.647749952,
						          0.741180955, 0.837104527, 0.934596871, 1.03271908,
						          1.13052619, 1.22707626, 1.32143947, 1.41270703,
						          1.5, 1.58247770, 1.65934582, 1.72986407,
						          1.79335334, 1.84920218, 1.89687274, 1.93590593,
						          1.96592583, 1.98664333, 1.99785892, 1.99946459,
						          1.99144486, 1.97387698, 1.94693013, 1.91086382};

uint16_t bufferTensaoVC[64] = {0.133974596, 0.0891361751, 0.0530698705, 0.0261230207,
						          0.00855513863, 0.000535412524, 0.00214107676, 0.0133566679,
						          0.0340741737, 0.0640940732, 0.103127258, 0.150797818,
						          0.20664666, 0.270135927, 0.340654185, 0.417522303,
						          0.5, 0.58729297, 0.678560535, 0.772923737,
						          0.869473808, 0.967280917, 1.06540313, 1.16289547,
						          1.25881905, 1.35225005, 1.44228869, 1.52806785,
						          1.60876143, 1.6835923, 1.75183981, 1.81284668,
						          1.8660254, 1.91086382, 1.94693013, 1.97387698,
						          1.99144486, 1.99946459, 1.99785892, 1.98664333,
						          1.96592583, 1.93590593, 1.89687274, 1.84920218,
						          1.79335334, 1.72986407, 1.65934582, 1.5824777,
						          1.5, 1.41270703, 1.32143947, 1.22707626,
						          1.13052619, 1.03271908, 0.934596871, 0.837104527,
						          0.741180955, 0.647749952, 0.55771131, 0.471932149,
						          0.391238571, 0.316407698, 0.248160193, 0.187153315};

int module_cfg_init(void)
{
	int result = 1;
	//TODO: implementar funcao para ler variaveis salvas na flash
	configs.boardID = 1;
	configs.enable = true;

	configs.sensors[0].enable = true;
	configs.sensors[1].enable = true;
	configs.sensors[2].enable = true;
	configs.sensors[3].enable = true;

	configs.inputs[0].enable = true;
	configs.inputs[0].inverted = false;
	configs.inputs[0].debouncingTime = 5;

	configs.inputs[1].enable = true;
	configs.inputs[1].inverted = false;
	configs.inputs[1].debouncingTime = 5;

	configs.inputs[2].enable = true;
	configs.inputs[2].inverted = false;
	configs.inputs[2].debouncingTime = 5;

	configs.inputs[3].enable = true;
	configs.inputs[3].inverted = false;
	configs.inputs[3].debouncingTime = 5;

	return result;
}
